[{"content":"微软在拥抱开源社区后推出wsl极大提升了Windows的开发体验，相比双系统wsl可以动态分配存储空间和内存，并且搭配vscode可以获得几乎原生Linux的开发体验。\n在微软更新wsl2之后，现在可以与Windows宿主机共用host，不同再去获取wsl2的动态IP，每次都要手动设置代理，更加方便开发了。\n本篇博文主要是记录一下在wsl2中配置深度学习环境。\nInstall wsl2 要安装wsl2首先要在系统服务中打开hyper-V虚拟化以及Linux sub system。 在Windows应用商店中搜索Ubuntu直接安装就可以了。 因为wsl2默认安装在C盘，所以可以在poweshell中用wsl命令将Linux子系统打包成tar或者镜像文件，然后export到另外的分区中。 Config wsl2 首先启动需要设置好username和passwd\n我个人使用zsh搭配oh my zsh美化比较多。可以使用apt安装\n1 2 3 sudo apt update sudo apt install zsh sh -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\u0026#34; 接下来安装深度学习必备的python环境，anaconda作为python的环境管理有点太重了，推荐使用miniconda 1 2 wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh bash Miniconda3-latest-Linux-x86_64.sh 如果要使用GPU加速，还需要安装CUDA-TOOlkit以及NVIDIA Driver，这部分工具链已经很完善了，微软也提供了完善的官方文档。\n1.首先安装NVIDIA Driver，这个可以直接在NVIDIA官网上找到，安装与自己GPU型号对应的驱动即可\nTIPS: 安装的时候选择Windows版驱动即可。\n2.接着安装CUDA支持\n1 2 3 4 5 6 7 8 9 sudo apt-key del 7fa2af80 #去除旧的GPG key wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600 wget https://developer.download.nvidia.com/compute/cuda/12.4.0/local_installers/cuda-repo-wsl-ubuntu-12-4-local_12.4.0-1_amd64.deb sudo dpkg -i cuda-repo-wsl-ubuntu-12-4-local_12.4.0-1_amd64.deb sudo cp /var/cuda-repo-wsl-ubuntu-12-4-local/cuda-*-keyring.gpg /usr/share/keyrings/ sudo apt-get update sudo apt-get -y install cuda-toolkit-12-4 3.确认安装是否完成\n1 2 nvcc -v #查看nvcc编译器是否安装 nvidia-smi #查看gpu状态 接下来安装一下pytorch，即\n1 conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia # 这里使用cuda12.1 安装完成后可以在python中用torch.cuda.is_available()查看是否可以调用GPU加速。\n","date":"2024-03-24T11:37:50+08:00","image":"https://raw.githubusercontent.com/xbunax/blogImg/main/202403241154248.webp","permalink":"http://localhost:1313/p/configwsl/","title":"Configwsl"},{"content":"对于使用Spotify作为主力音乐流媒体的人来说，Spotify官方的桌面app体验并不是很好，无法看歌词，而且UI水平对于我个人审美来说感觉并不是很好看。\nSpotify 第三方客户端 Spotify webUI 这时候就要选择第三方的Spotify客户端了，或者也可以使用Spotify的webUI然后使用美化插件，我webUI使用的Arc浏览器搭配上Gallery美化，其实最后的效果还可以，而且很轻量化，除了没法看歌词都很完美。\nSpotify TUI 但是webUI到底还是官方的UI而且没法看歌词，而且作为重度终端使用者，还是希望在终端上使用Spotify。我选择使用的是spotify_player一个用rust开发的开源的Spotify TUI，使用vim的键位并且在iTerm2中可以显示专辑封面，同时也可以在配置文件~/.config/spotify-player/app.toml中进行自定义。\nSpotify Lyrics 接下来要解决官方客户端无法看歌词的问题，我们可以使用sptlrx这个开源的终端歌词同步软件，搭配spotify_player使用可以看当前歌曲的歌词。\nCustom Your TUI 这样我们就实现了在终端上使用Spotify并且显示滚动歌词，同时搭配cava(一个Audio Visualizer，依赖backgroud Music实现)，最后使用tty-clock为整个布局点缀一下，就可以实现封面的效果了。\nOptimization 虽然这样布局很不错，但是每次都要手动分屏很麻烦，能不能实现在终端敲一个命令自动分屏布局并且每个pane自动执行对应的命令呢，当然是可以的啦。\n我一开始选择使用tmux和tmuxp这样就可以用yml配置文件写好tmux session布局并且在对应的pane执行不同的命令，但是研究了一下tmuxp发现好像无法实现封面那样的复杂布局，只有几个预设的布局，而且tmux无法显示超过1M大小的图片所以spotify_player无法显示图片。\n所以最后另辟蹊径，使用AppleScript直接对iTerm2进行布局。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 tell application \u0026#34;iTerm\u0026#34; tell current window tell current session of current tab split vertically with default profile split vertically with default profile end tell tell third session of current tab split horizontally with default profile end tell tell first session of current tab write text \u0026#34;spotify_player\u0026#34; end tell tell second session of current tab write text \u0026#34;sptlrx\u0026#34; end tell tell third session of current tab write text \u0026#34;tty-clock -c -s\u0026#34; end tell tell fourth session of current tab write text \u0026#34;cava\u0026#34; end tell end tell end tell 这样将AppleScript保存为scpt文件，只需要在终端中用osascript scpt文件路径执行AppleScript脚本就可以实现一键布局啦。如果嫌每次输osascript命令很麻烦，在~/.zshrc中用alias映射一下命令或者写个shell脚本添加到环境变量就可以啦。\n这就是最后的效果啦。\n如果要使用本教程需要会一点Unix-like系统的操作，最基础的ls cd这些需要会使用，如果是Mac则要安装Homebrew作为包管理器，方便管理和安装。 如果要使用spotify_player需要一个Spotify的会员账号，并且去dev spotify申请一个client id。 ","date":"2024-03-06T13:17:22+08:00","image":"https://raw.githubusercontent.com/xbunax/blogImg/main/spotify_tui/cover.png","permalink":"http://localhost:1313/p/spotify_tui/","title":"Spotify_tui"},{"content":" My Mac Workflow 作为一个六年的Mac用户，从2018款macbook pro到M2芯片的macbook air，积累了很多Mac的使用心得与好用的软件。在此分享一下我在Mac上的workflow。\nTips：本人专业背景为理论物理，主要科研工作偏向使用Unix-like系统，所以不会涉及windows(但是可以使用wsl2)。 推荐安装homebrew作为MacOS上的包管理器。 Zotero 作为科研狗第一重要的事当然是看文献了，那么一个好的文献管理器至关重要，虽然学校提供了正版的EndNote但是相比而言更喜欢免费的Zotero，并且可以安装第三方插件，例如我装了preview插件可以预览文献内容。 并且我主要使用latex为论文排版，Zotero可以快速导出bibtex文件方便在论文中引用文献。 同时Zotero可以利用官方提供的网盘进行多平台同步，但是免费容量只有5G，一般来说够用但是为了长远考虑，我使用微软学生认证提供的2T OneDrive挂载到koofr实现webDAV，这样就能使用白嫖到的2T空间做同步备份了。 Material Project 作为广大炼丹烧炉子研究工作者，在科研中肯定遇到要查询材料参数的情况，MaterialProject，这个网站作为材料领域做高通量计算方向搭建的，囊括了大量的材料参数，并且作为开源项目的一部分，此网站还提供了python的package(pymatgen)方便调用网站的api，可以获取材料的晶格结构等并且给出相关的文献。\nPngpaste 我的论文写作工具主要是neovim+latex，但是由于饱受latex上古语法困扰最近也在尝试typst并且得益于neovim活跃的社区，typst的lsp还有双向链接工具已经完全可用了。\n不管是latex还是typst写作时一直有一个痛点那就是插入图片，往往我会将图片截图存在剪贴板中，但是在用neovim写论文时，经常要切出去保存图片非常影响效率。这时候我们就可以用pngpaste这个CLI工具，可以在命令行环境下读取剪贴板图片保存为png格式，这样在neovim中用toggleterm插件写一个autocmd自动保存剪贴板图片，大大提升了效率。\nWindow Manager 由于苹果的封闭，Mac上的窗口管理器选择并不是很多，yabai虽然可以实现平铺窗口管理器的大部分功能，但是需要关闭SIP，无法在Mac上使用iPad和iPhone应用也无法使用Touch ID支付。博主本人尝试过后发现bug相对较多，而且yabai的主要贡献者只有作者一人，yabai调用的api非常底层，每次苹果更新系统过都要等待作者适配，就体验来说并不是很好。\n现在博主主力的window Manager是amethyst。相比于yabai的优势在于不用关闭SIP所以相对来说受系统版本变化影响较小，而且amethyst配置相对简单，基本等于开箱即用，设置好快捷键键位就可以用了，不需要像yabai设置好yabairc还需要利用skhd再去映射快捷键，虽然可以直接抄大佬的配置，但是需要踩的坑还是相对多一点。\n但是不需要关闭SIP，就意味着相较于yabai，amethyst相对而言还是缺少了类似于创建销毁窗口，设置windows animation全局窗口透明度这些功能。但是amethyst作为平铺窗口管理还是合格了，快速移动窗口，一键更改布局，单独设置float窗口。\n","date":"2024-03-05T17:13:34+08:00","image":"https://raw.githubusercontent.com/xbunax/blogImg/main/workflow/cover.png","permalink":"http://localhost:1313/p/mymacworkflow/","title":"MyMacWorkflow"},{"content":"Hello World ","date":"2024-02-25T13:36:38+08:00","permalink":"http://localhost:1313/p/first/","title":"First"}]